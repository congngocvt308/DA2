@startuml
'** Use Case Diagram - Hệ thống Báo thức Thông minh **

left to right direction
skinparam packageStyle rectangle

actor "Người dùng" as User
actor "Android AlarmManager" as AlarmMgr

rectangle "Hệ thống Báo thức Thông minh" {
    
    package "Quản lý Báo thức" {
        usecase "UC01: Tạo báo thức mới" as UC01
        usecase "UC02: Chỉnh sửa báo thức" as UC02
        usecase "UC03: Xóa báo thức" as UC03
        usecase "UC04: Bật/Tắt báo thức" as UC04
        usecase "UC05: Xem danh sách báo thức" as UC05
        usecase "UC06: Tạo báo thức nhanh" as UC06
    }
    
    package "Quản lý Chủ đề & Câu hỏi" {
        usecase "UC07: Tạo chủ đề mới" as UC07
        usecase "UC08: Thêm câu hỏi vào chủ đề" as UC08
        usecase "UC09: Chỉnh sửa câu hỏi" as UC09
        usecase "UC10: Xóa câu hỏi" as UC10
        usecase "UC11: Xem chi tiết chủ đề" as UC11
        usecase "UC12: Tìm kiếm chủ đề" as UC12
    }
    
    package "Thực thi Báo thức" {
        usecase "UC13: Nhận báo thức reo" as UC13
        usecase "UC14: Trả lời câu hỏi Quiz" as UC14
        usecase "UC15: Quét QR Code để tắt" as UC15
        usecase "UC16: Snooze báo thức" as UC16
        usecase "UC17: Tắt báo thức" as UC17
    }
    
    package "Quản lý QR Code" {
        usecase "UC18: Quét và lưu mã QR" as UC18
        usecase "UC19: Liên kết QR với báo thức" as UC19
        usecase "UC20: Xóa mã QR" as UC20
    }
    
    package "Thống kê & Báo cáo" {
        usecase "UC21: Xem thống kê tuần" as UC21
        usecase "UC22: Xem phân phối SRS" as UC22
        usecase "UC23: Xem điểm Wake-up Score" as UC23
        usecase "UC24: Theo dõi Streak" as UC24
    }
    
    ' Internal use cases
    usecase "Lập lịch hẹn hệ thống" as Schedule
    usecase "Chọn câu hỏi theo SRS" as SelectSRS
    usecase "Cập nhật tiến độ học tập" as UpdateProgress
    usecase "Xác thực mã QR" as ValidateQR
}

' User relationships
User --> UC01
User --> UC02
User --> UC03
User --> UC04
User --> UC05
User --> UC06

User --> UC07
User --> UC08
User --> UC09
User --> UC10
User --> UC11
User --> UC12

User --> UC13
User --> UC14
User --> UC15
User --> UC16
User --> UC17

User --> UC18
User --> UC19
User --> UC20

User --> UC21
User --> UC22
User --> UC23
User --> UC24

' AlarmManager relationships
AlarmMgr --> UC13

' Include relationships
UC01 ..> Schedule : <<include>>
UC02 ..> Schedule : <<include>>
UC04 ..> Schedule : <<include>>
UC06 ..> Schedule : <<include>>

UC14 ..> SelectSRS : <<include>>
UC14 ..> UpdateProgress : <<include>>

UC15 ..> ValidateQR : <<include>>
UC17 ..> ValidateQR : <<include>>

' Extend relationships
UC13 ..> UC16 : <<extend>>
UC13 ..> UC17 : <<extend>>

UC17 ..> UC14 : <<extend>>\n[có quiz]
UC17 ..> UC15 : <<extend>>\n[có QR]

UC02 ..> UC19 : <<extend>>\n[chọn QR]

@enduml


